chan D0_0 = [1] of {int};
chan D0_1 = [1] of {int};
chan D0_2 = [1] of {int};
chan C1_0 = [0] of {int};
int x1_0;
chan C1_1 = [0] of {int};
int x1_1;

/* ========================================================= */ 
proctype P0() {
	D0_0!1;
	D0_1!1;
	atomic {
		if
		:: x1_0 == 0 -> C1_0?1 -> x1_0=1
		fi
	};
	atomic {
		if
		:: (x1_0==1 && x1_1 == 0) -> C1_1?1 -> x1_1=1
		fi
	};
	D0_2!1
}

/* ========================================================= */ 
proctype P1() {
	atomic {
		if
		:: D0_0?1
		fi
	};
	atomic {
		D0_1?1
		
	};
	C1_0!1;
	C1_1!1;
	atomic {
		if
		:: D0_0?1
		:: (empty(D0_0) && nempty(D0_2)) -> D0_2?1
		fi
	}
}

/* ========================================================= */ 
init {
	run P0(); run P1()
}